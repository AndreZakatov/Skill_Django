{% extends 'shopapp/base.html' %}
{% load i18n %}  {# Загружаем теги интернационализации #}

{% block title %}
  {% blocktranslate with product_name=product.name %}Product #{{ product.pk }} - {{ product_name }}{% endblocktranslate %}
{% endblock %}

{% block body %}
  <h1>
    {% blocktranslate with product_name=product.name %}
      Product <strong>{{ product_name }}</strong>
    {% endblocktranslate %}
  </h1>

  <div>
    <div>
      {% translate "Descriptions" %}: <em>{{ product.description }}</em>
    </div>
    <div>
      {% translate "Price" %}: {{ product.price }}
    </div>
    <div>
      {% translate "Discount" %}: {{ product.discount }}
    </div>
    <div>
      {% translate "Archived" %}:
      {% if product.archived %}
        {% translate "yes" %}
      {% else %}
        {% translate "no" %}
      {% endif %}
    </div>

    {% if product.preview %}
      <img src="{{ product.preview.url }}" alt="{{ product.preview.name }}">
    {% endif %}

    <h3>{% translate "Images" %}:</h3>
    <div>
      {% with image_count=product.images.count %}
        <p>
          {% blocktranslate count counter=image_count %}
            There is only one image available.
          {% plural %}
            There are {{ counter }} images available.
          {% endblocktranslate %}
        </p>

        {% for img in product.images.all %}
          <div>
            <img src="{{ img.image.url }}" alt="{{ img.image.name }}">
            <div>{{ img.description }}</div>
          </div>
        {% empty %}
          <div>{% translate "No images uploaded yet" %}</div>
        {% endfor %}
      {% endwith %}
    </div>
  </div>

  <div>
    <a href="{% url 'shopapp:product_update' pk=product.pk %}">
      {% translate "Update product" %}
    </a>
  </div>
  <div>
    <a href="{% url 'shopapp:product_delete' pk=product.pk %}">
      {% translate "Archive product" %}
    </a>
  </div>
  <div>
    <a href="{% url 'shopapp:products_list' %}">
      {% translate "Back to products list" %}
    </a>
  </div>
{% endblock %}